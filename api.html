
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>API documentation &#8212; Flask-Storm 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Changelog" href="changelog.html" />
    <link rel="prev" title="Documentation" href="documentation.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="api-documentation">
<h1>API documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h1>
<p>The following functions and classes are part of Flask Storm’s public API. All are available directly from the top level namespace <code class="docutils literal notranslate"><span class="pre">flask_storm</span></code>. Imports from namespaces below <code class="docutils literal notranslate"><span class="pre">flask_storm</span></code>, such as <code class="docutils literal notranslate"><span class="pre">flask_storm.debug</span></code> is not supported and may change across versions.</p>
<section id="extension">
<h2>Extension<a class="headerlink" href="#extension" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="flask_storm.FlaskStorm">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">FlaskStorm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_storm.FlaskStorm" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a FlaskStorm instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>app</strong> – Application to enable Flask-Storm for. This is the same as
calling <a class="reference internal" href="#flask_storm.FlaskStorm.init_app" title="flask_storm.FlaskStorm.init_app"><code class="xref py py-meth docutils literal notranslate"><span class="pre">init_app()</span></code></a> after initialization.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="flask_storm.FlaskStorm.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_storm.FlaskStorm.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new Store instance with a connection to the database specified
in the STORM_DATABASE_URI configuration variable of the bound application.
This method normally not be called externally as it does not close the
store once the application context tears down.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bind</strong> – Database URI to use, defaults to <code class="docutils literal notranslate"><span class="pre">STORM_DATABASE_URI</span></code>.
See <a class="reference internal" href="#flask_storm.FlaskStorm.get_binds" title="flask_storm.FlaskStorm.get_binds"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_binds()</span></code></a> for details.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Store instance</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>RuntimeError</strong> – if no connection URI is found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="flask_storm.FlaskStorm.get_binds">
<span class="sig-name descname"><span class="pre">get_binds</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_storm.FlaskStorm.get_binds" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dict of database URIs for the application as defined by the
<code class="docutils literal notranslate"><span class="pre">STORM_BINDS</span></code> configuration variable. If <code class="docutils literal notranslate"><span class="pre">STORM_DATABASE_URI</span></code> is
defined it will be available using the key <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Dict from bind names to database URIs.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="flask_storm.FlaskStorm.get_store">
<span class="sig-name descname"><span class="pre">get_store</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_storm.FlaskStorm.get_store" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Store instance for the current application context. If there is
no instance a new one will be created. Instances created using this
method will close on application context tear down.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bind</strong> – Bind name of database URI. Defaults to the one specified by
<code class="docutils literal notranslate"><span class="pre">STORM_DATABASE_URI</span></code>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Store for the current application context.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>RuntimeError</strong> – if accessed outside the scope of an application
context.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="flask_storm.FlaskStorm.init_app">
<span class="sig-name descname"><span class="pre">init_app</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_storm.FlaskStorm.init_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Binds this extension to the given application. This is important since
the database connection will not close unless the application has been
initialized.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>One instance of FlaskStorm may be registered to multiple
applications. One application should however only be registered to
one FlaskStorm instance, or tear down functionality will trigger
multiple times.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>app</strong> – Application to enable Flask-Storm for.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>RuntimeError</strong> – if an application is already bound to this
instance by being passed to the constructor.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="flask_storm.FlaskStorm.store">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">store</span></span><a class="headerlink" href="#flask_storm.FlaskStorm.store" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Store instance for the current application context. If there is
no instance a new one will be created. Instances created using this
method will close on application context tear down.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bind</strong> – Bind name of database URI. Defaults to the one specified by
<code class="docutils literal notranslate"><span class="pre">STORM_DATABASE_URI</span></code>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Store for the current application context.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>RuntimeError</strong> – if accessed outside the scope of an application
context.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="context-locals">
<h2>Context locals<a class="headerlink" href="#context-locals" title="Permalink to this headline">¶</a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="store">
<span class="sig-name descname"><span class="pre">store</span></span><em class="property"> <span class="pre">=</span> <span class="pre">Proxy</span> <span class="pre">for</span> <span class="pre">FlaskStorm.store</span></em><a class="headerlink" href="#store" title="Permalink to this definition">¶</a></dt>
<dd><p>Shorthand for <code class="xref py py-attr docutils literal notranslate"><span class="pre">FlaskStorm.store</span></code> which does not depend on knowing
the FlaskStorm instance bound to the current request context. This is the
prefered method of accessing the Store, since using the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">FlaskStorm.store</span></code> property directly makes it easy to accidentally
create circular imports.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="flask_storm.create_context_local">
<span class="sig-name descname"><span class="pre">create_context_local</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_storm.create_context_local" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a context local for the given bind. None means the default store.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Context local for the bind report_store</span>
<span class="n">report_store</span> <span class="o">=</span> <span class="n">create_context_local</span><span class="p">(</span><span class="s2">&quot;report_store&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This is what is used to implement the store context local which analogue to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">store</span> <span class="o">=</span> <span class="n">create_context_local</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bind</strong> – Bind name of database URI to use when creating store.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>RuntimeError</strong> – if working outside application context or if
FlaskStorm is not bound to the current application.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="tracers">
<h2>Tracers<a class="headerlink" href="#tracers" title="Permalink to this headline">¶</a></h2>
<p>Tracers provide facilities to intercept and read SQL statements generated by Storm. The tracers provided in Flask-Storm are tailored for use in multithreaded environments, and work in conjunction with Flask’s contexts.</p>
<section id="debugtracer">
<h3>DebugTracer<a class="headerlink" href="#debugtracer" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="flask_storm.DebugTracer">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">DebugTracer</span></span><a class="headerlink" href="#flask_storm.DebugTracer" title="Permalink to this definition">¶</a></dt>
<dd><p>A tracer which stores all queries with parameters onto the current request
context. Queries are accessible using <a class="reference internal" href="#flask_storm.get_debug_queries" title="flask_storm.get_debug_queries"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_debug_queries()</span></code></a>. It is used
as a context manager. Since all queries are stored on the request context,
they can only be accessed until the current request tears down.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">DebugTracer</span><span class="p">():</span>
    <span class="c1"># Perform queries</span>
    <span class="n">queries</span> <span class="o">=</span> <span class="n">get_debug_queries</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#flask_storm.get_debug_queries" title="flask_storm.get_debug_queries"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_debug_queries()</span></code></a> do not need to be called within the context
manager, as long as the request context is still alive, since all queries
are stored on the request context.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="flask_storm.get_debug_queries">
<span class="sig-name descname"><span class="pre">get_debug_queries</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_storm.get_debug_queries" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an array of queries executed within the context of a
<a class="reference internal" href="#flask_storm.DebugTracer" title="flask_storm.DebugTracer"><code class="xref py py-class docutils literal notranslate"><span class="pre">DebugTracer</span></code></a> under the current application context and thread.</p>
</dd></dl>

</section>
<section id="requesttracer">
<h3>RequestTracer<a class="headerlink" href="#requesttracer" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="flask_storm.RequestTracer">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">RequestTracer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fancy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_storm.RequestTracer" title="Permalink to this definition">¶</a></dt>
<dd><p>A tracer which prints all SQL queries generated by Storm directly to STDOUT.
This is useful when debugging views in flask.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">RequestTracer</span><span class="p">():</span>
    <span class="c1"># Queries executed here will be printed into STDOUT</span>
    <span class="o">...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – File like object (has write method) where queries will be
logged to.</p></li>
<li><p><strong>fancy</strong> – When <code class="docutils literal notranslate"><span class="pre">True</span></code> (default) colored output is used, if support is
detected, when <code class="docutils literal notranslate"><span class="pre">False</span></code> plain text is used.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="flask_storm.RequestTracer.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_storm.RequestTracer.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Install and activate this tracer for all statements executed in this
thread (or greenlet).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="flask_storm.RequestTracer.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_storm.RequestTracer.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop using this tracer.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="utility">
<h2>Utility<a class="headerlink" href="#utility" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="flask_storm.find_flask_storm">
<span class="sig-name descname"><span class="pre">find_flask_storm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#flask_storm.find_flask_storm" title="Permalink to this definition">¶</a></dt>
<dd><p>Find and return <a class="reference internal" href="#flask_storm.FlaskStorm" title="flask_storm.FlaskStorm"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlaskStorm</span></code></a> instance for the given application.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>app</strong> – Application to look for FlaskStorm instance in.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>FlaskStorm instance if found, else None.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Flask-Storm</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#extension">Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="#context-locals">Context locals</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tracers">Tracers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#utility">Utility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="documentation.html" title="previous chapter">Documentation</a></li>
      <li>Next: <a href="changelog.html" title="next chapter">Changelog</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Andreas Runfalk.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/api.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>